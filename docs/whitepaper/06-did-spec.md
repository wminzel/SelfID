Decentralized Identifier (DID) Specification

This section defines the DID format, resolution mechanism, key structure, and metadata model used by SelfID. The goal is to ensure interoperability with W3C DID standards while keeping the system simple, lightweight, and secure.

6.1 DID Format

SelfID DIDs follow a simple, deterministic pattern:

did:selfid:<unique-id>

Components
Component	Description
did	Required prefix for all decentralized identifiers
selfid	Method name for the SelfID DID method
<unique-id>	User-generated or randomly generated unique string
Examples
did:selfid:0xA94FBC1239
did:selfid:user123
did:selfid:walid-mnz-001


The <unique-id> MAY be:

a hash of the public key

a UUID

a human-friendly string

or generated by the wallet

SelfID does not enforce a strict format to maximize flexibility.

6.2 DID Document Structure

A DID Document describes how verifiers interact with a DID.
In SelfID, the DID Document is derived from on-chain data.

SelfID DID Document (Minimal Example)
{
  "@context": ["https://www.w3.org/ns/did/v1"],
  "id": "did:selfid:xyz123",
  "verificationMethod": [
    {
      "id": "did:selfid:xyz123#key-1",
      "type": "EcdsaSecp256k1VerificationKey2019",
      "controller": "did:selfid:xyz123",
      "publicKeyHex": "03abf...c91"
    }
  ],
  "authentication": [
    "did:selfid:xyz123#key-1"
  ],
  "assertionMethod": [
    "did:selfid:xyz123#key-1"
  ]
}


This document is NOT stored on-chain.
It is assembled by DID resolvers using on-chain public key data.

6.3 DID Hashing Method

Since the registry contract stores only hashed DIDs, the hashing function is:

didHash = keccak256(utf8(DID))


This ensures:

constant storage size

strong lookup performance

privacy (DID not directly stored in public state)

6.4 DID Resolution Process
Input:
did:selfid:xyz123

Resolution Steps:
1. Compute didHash = keccak256(DID)
2. Query SelfIDRegistry.resolve(didHash)
3. Receive:
       - publicKey
       - updatedAt
4. Construct DID Document dynamically
5. Return JSON DID Document to verifier

Diagram
Verifier --> Resolver --> Blockchain
                              |
                              v
          DID Registry returns public key + timestamp
Resolver builds JSON DID Document
Resolver returns DID Document to verifier


SelfID DIDs are fully resolvable without storing documents on-chain.

6.5 Verification Methods

SelfID supports:

Primary Key Algorithm
secp256k1 (Ethereum standard)


Fast

Battle-tested

Supported in wallets, libraries, and ZK tooling

Future support MAY include:

Ed25519

BLS signatures

Post-quantum keys (optional upgrades)

6.6 Key Rotation Rules

A DID MAY update keys using the updateKey contract method.

Rules:

Old key MUST sign the rotation request

New key becomes the active verification method

DID identifier stays the same

Verifiers MUST always use the latest public key

All previous signatures remain valid (old signatures valid at time of issuance)

This enables safe recovery without losing identity.

6.7 Deactivation

A DID MAY be deactivated.

Future spec may include:

deactivateDID(did)


Until then, a DID with empty keys or expired metadata MAY be considered inactive.

6.8 Summary

SelfID DID Specification is designed for:

Simplicity (minimal fields)

Privacy (hashed DID lookups)

Interoperability (W3C alignment)

Security (secp256k1 + rotation)

Scalability (off-chain DID documents)

SelfIDâ€™s DID method is intentionally lightweight to enable global adoption.
